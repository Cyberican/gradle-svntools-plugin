/**
 * Publishing to Bintray (see https://github.com/etiennestuder/gradle-plugindev-plugin/):
 *
 * gradlew -i publishPluginToBintray -PbintrayUser=[username] -PbintrayApiKey=[api-key]
 */
plugins {
  id "java-gradle-plugin"
  id "groovy"
  id "idea"
  id "nu.studer.plugindev" version "1.0.3"
}

group = "at.bxm.gradleplugins"
version = "0.4"

dependencies {
  compile "org.codehaus.groovy:groovy-all:2.3.6"
  compile "org.tmatesoft.svnkit:svnkit:1.8.5"
  testCompile("org.spockframework:spock-core:0.7-groovy-2.0") {
    exclude group: "org.codehaus.groovy"
  }
}

plugindev {
  pluginId "at.bxm.svntools"
  pluginImplementationClass "at.bxm.gradleplugins.svntools.SvnToolsPlugin"
  pluginDescription "Provides various Subversion tasks that operate on a local SVN workspace"
  pluginLicenses "MIT"
  pluginTags "subversion", "svn", "svnkit", "scm"
  authorId "martoe"
  authorName "Martin Ehrnhoefer"
  authorEmail "martin@ehrnhoefer.com"
  projectUrl "https://github.com/martoe/gradle-svntools-plugin"
  projectInceptionYear "2014"
  done()
}

if (project.hasProperty("bintrayUser")) {
  bintray {
    user = "$bintrayUser"
    key = "$bintrayApiKey"
    pkg.repo = "gradle-plugins"
  }
  bintrayUpload.dependsOn check
}

if (project.hasProperty("ignoreTestFailures")) {
  test {
    ignoreFailures = ignoreTestFailures == "true"
  }
}
